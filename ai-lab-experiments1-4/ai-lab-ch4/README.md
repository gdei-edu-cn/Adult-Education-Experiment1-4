# 实验4：AI个人助理开发

## 📋 实验目标
- 学习调用AI API接口
- 开发多功能AI个人助理
- 掌握API密钥配置和使用
- 理解AI应用开发流程

## 🎯 实验内容
1. **API连接测试**：使用 `test_siliconflow_api.py` 测试API连通性
2. **AI助理开发**：使用 `my_assistant_sf.py` 开发多功能AI助理

## 📦 需要安装的包
```bash
pip install requests
```

## 🔑 获取API密钥

### 步骤1：注册硅基流动账号
1. 打开浏览器，访问：https://cloud.siliconflow.cn/
2. 点击"注册"按钮
3. 填写邮箱和密码完成注册
4. 登录到控制台

### 步骤2：获取API密钥
1. 登录后，进入"API密钥"页面
2. 点击"创建新密钥"
3. 复制生成的API密钥（类似：`sk-xxxxxxxxxxxxxxxx`）
4. **重要**：请妥善保存，不要泄露给他人

### 步骤3：充值账户
1. 进入"余额"页面
2. 充值少量金额（建议10-20元）
3. 确认账户有足够余额

## 🚀 运行步骤

### 实验4.1：测试API连接

1. 进入实验目录：
   ```bash
   cd 实验1~4/ai-lab-ch4
   ```

2. 编辑 `test_siliconflow_api.py` 文件：
   - 找到第9行：`API_KEY = ""`
   - 在引号内填入你的API密钥：`API_KEY = "sk-你的密钥"`

3. 运行测试程序：
   ```bash
   python test_siliconflow_api.py
   ```

4. 选择测试模式：
   - 输入 `1`：快速测试（推荐）
   - 输入 `2`：综合测试

### 实验4.2：运行AI个人助理

1. 编辑 `my_assistant_sf.py` 文件：
   - 找到第9行：`API_KEY = ""`
   - 在引号内填入你的API密钥：`API_KEY = "sk-你的密钥"`

2. 运行AI助理程序：
   ```bash
   python my_assistant_sf.py
   ```

3. 选择功能：
   - 输入 `1`：智能聊天
   - 输入 `2`：图片生成
   - 输入 `3`：情感分析
   - 输入 `4`：退出程序

## ✅ 预期结果

### test_siliconflow_api.py 输出示例：
```
硅基流动API连通性测试
==============================
🔍 正在测试API连接...
✅ API连接成功！AI回复: 你好！我是AI助手，很高兴为您服务！

🎉 测试通过！API连接正常，可以正常使用AI功能
```

### my_assistant_sf.py 输出示例：
```
🤖 我的AI个人助理
========================================

请选择功能:
1. 智能聊天
2. 图片生成
3. 情感分析
4. 退出程序
请输入选择 (1-4): 1

💬 聊天模式（输入'返回'退出聊天）
你: 你好
AI: 你好！我是你的AI助理，有什么可以帮助你的吗？
```

## ❌ 常见问题

### 问题1：API密钥错误
**错误信息**：`HTTP错误: 401` 或 `Unauthorized`
**解决方案**：
1. 检查API密钥是否正确复制
2. 确认密钥没有多余的空格
3. 重新生成API密钥

### 问题2：余额不足
**错误信息**：`Insufficient balance` 或 `余额不足`
**解决方案**：
1. 登录硅基流动控制台
2. 进入"余额"页面充值
3. 建议充值10-20元

### 问题3：网络连接问题
**错误信息**：`网络连接失败` 或 `请求超时`
**解决方案**：
1. 检查网络连接
2. 尝试使用VPN
3. 稍后重试

### 问题4：图片生成失败
**错误信息**：`所有模型尝试失败`
**解决方案**：
1. 检查API密钥和余额
2. 尝试更简单的图片描述
3. 稍后重试（可能是服务器繁忙）

### 问题5：编码问题
**错误信息**：中文显示乱码
**解决方案**：
1. 确保文件保存为UTF-8编码
2. 在Windows上设置：`chcp 65001`
3. 使用支持UTF-8的终端

## 📚 学习要点

### API调用基础
- HTTP请求和响应
- JSON数据格式
- API密钥认证
- 错误处理

### AI应用开发
- 多模态AI应用
- 用户交互设计
- 功能模块化
- 异常处理

### 实际应用场景
- 智能客服
- 内容生成
- 情感分析
- 图像创作

## 🔧 进阶实验

### 添加新功能
1. **语音识别**：集成语音输入
2. **文件处理**：支持文档分析
3. **定时任务**：添加提醒功能
4. **数据存储**：保存聊天记录

### 优化用户体验
1. 添加更多emoji表情
2. 改进错误提示信息
3. 添加使用说明
4. 优化界面布局

### 扩展AI能力
1. 集成更多AI模型
2. 添加代码生成功能
3. 支持多语言对话
4. 添加翻译功能

## 💡 实验提示

1. **API密钥安全**：不要将密钥提交到代码仓库
2. **费用控制**：图片生成比文本对话消耗更多费用
3. **网络稳定**：确保网络连接稳定
4. **耐心等待**：图片生成需要较长时间

## 🔗 相关资源
- [硅基流动官方文档](https://cloud.siliconflow.cn/docs)
- [Requests库文档](https://requests.readthedocs.io/)
- [API设计最佳实践](https://restfulapi.net/)

## ⚠️ 重要提醒
1. **保护API密钥**：不要分享给他人
2. **控制费用**：注意API调用费用
3. **遵守使用条款**：合理使用AI服务
4. **数据隐私**：不要输入敏感信息

---
**注意**：如果遇到API相关问题，请检查密钥配置和账户余额。遇到技术问题请及时联系老师。
